<!DOCTYPE html>
<html>
<head>
    <title>크보 게임차 시각화</title>
    <link rel="stylesheet" href="../static/font.css">
    <link rel="stylesheet" href="../static/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</head>
<body>
    <!-- 최강한화 -->
    <div class="form-container">
        <img src="../static/hanhwa.jpg" class="logo">
        <h1>크보 게임차 시각화</h1>
        <form>
            <label for="datepicker">날짜:</label>
            <input type="text" id="datepicker" name="datepicker" placeholder="날짜 선택" readonly>
            <input type="button" value="Submit" onclick="redirectToImage()">
        </form>
        <p></p>
        <p class="made-by">
            Made by gwongibeom
        </p>
        <div class="github-logo">
            <a href="https://github.com/gwongibeom/kbo_ranking_visualize">
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTIgMGMtNi42MjYgMC0xMiA1LjM3My0xMiAxMiAwIDUuMzAyIDMuNDM4IDkuOCA4LjIwNyAxMS4zODcuNTk5LjExMS43OTMtLjI2MS43OTMtLjU3N3YtMi4yMzRjLTMuMzM4LjcyNi00LjAzMy0xLjQxNi00LjAzMy0xLjQxNi0uNTQ2LTEuMzg3LTEuMzMzLTEuNzU2LTEuMzMzLTEuNzU2LTEuMDg5LS43NDUuMDgzLS43MjkuMDgzLS43MjkgMS4yMDUuMDg0IDEuODM5IDEuMjM3IDEuODM5IDEuMjM3IDEuMDcgMS44MzQgMi44MDcgMS4zMDQgMy40OTIuOTk3LjEwNy0uNzc1LjQxOC0xLjMwNS43NjItMS42MDQtMi42NjUtLjMwNS01LjQ2Ny0xLjMzNC01LjQ2Ny01LjkzMSAwLTEuMzExLjQ2OS0yLjM4MSAxLjIzNi0zLjIyMS0uMTI0LS4zMDMtLjUzNS0xLjUyNC4xMTctMy4xNzYgMCAwIDEuMDA4LS4zMjIgMy4zMDEgMS4yMy45NTctLjI2NiAxLjk4My0uMzk5IDMuMDAzLS40MDQgMS4wMi4wMDUgMi4wNDcuMTM4IDMuMDA2LjQwNCAyLjI5MS0xLjU1MiAzLjI5Ny0xLjIzIDMuMjk3LTEuMjMuNjUzIDEuNjUzLjI0MiAyLjg3NC4xMTggMy4xNzYuNzcuODQgMS4yMzUgMS45MTEgMS4yMzUgMy4yMjEgMCA0LjYwOS0yLjgwNyA1LjYyNC01LjQ3OSA1LjkyMS40My4zNzIuODIzIDEuMTAyLjgyMyAyLjIyMnYzLjI5M2MwIC4zMTkuMTkyLjY5NC44MDEuNTc2IDQuNzY1LTEuNTg5IDguMTk5LTYuMDg2IDguMTk5LTExLjM4NiAwLTYuNjI3LTUuMzczLTEyLTEyLTEyeiIvPjwvc3ZnPg==">
            </a>
        </div>
    </div>
    <div class="today-kbo-container">
        <h1>오늘자 게임차 바로보기</h1>
        <span>오분 간격으로 업데이트 됩니다.</span>
    </div>
    <script>
        flatpickr("#datepicker", {
            dateFormat: "Y-m-d",
            enableTime: false,
            minDate: "2000-01-01",
            maxDate: "2025-12-31",
            locale: {
                rangeSeparator: " - ",
                weekdays: {
                    shorthand: ["일", "월", "화", "수", "목", "금", "토"],
                    longhand: [
                        "일요일",
                        "월요일",
                        "화요일",
                        "수요일",
                        "목요일",
                        "금요일",
                        "토요일"
                    ]
                },
                months: {
                    shorthand: [
                        "1월",
                        "2월",
                        "3월",
                        "4월",
                        "5월",
                        "6월",
                        "7월",
                        "8월",
                        "9월",
                        "10월",
                        "11월",
                        "12월"
                    ],
                    longhand: [
                        "1월",
                        "2월",
                        "3월",
                        "4월",
                        "5월",
                        "6월",
                        "7월",
                        "8월",
                        "9월",
                        "10월",
                        "11월",
                        "12월"
                    ]
                }
            }
        });
        function redirectToImage() {
            var selectedDate = flatpickr("#datepicker").selectedDates[0];
            if (!selectedDate) {
                alert("날짜를 선택해주세요.");
                return;
            }

            var year = selectedDate.getFullYear();
            var month = ("0" + (selectedDate.getMonth() + 1)).slice(-2);
            var day = ("0" + selectedDate.getDate()).slice(-2);

            var imageUrl = "/static/KBO" + year + "-" + month + "-" + day + ".png";

            window.location.href = imageUrl;
        }

        function createTodayImageElement() {
            var today = new Date();
            var year = today.getFullYear();
            var month = ("0" + (today.getMonth() + 1)).slice(-2);
            var day = ("0" + today.getDate()).slice(-2);

            var imageUrl = "../static/KBO" + year + "-" + month + "-" + day + ".png";

            var imageElement = document.createElement("img");
            imageElement.src = imageUrl;
            imageElement.alt = "KBO " + year + "-" + month + "-" + day;

            var todayContainer = document.querySelector(".today-kbo-container");
            todayContainer.appendChild(imageElement);
        }

        document.addEventListener("DOMContentLoaded", function() {
            createTodayImageElement();
        });
        </script>
</body>
</html>
